#include "./interface.h"
#include <time.h>
int main () {
	TAD_community ht=NULL;
	/*ht = load(ht,"../dump exemplo/ubuntu/");
	ht=clean(ht);*/
    clock_t a,b,c,d,e,f,g,h,m,j,k,l,y,o,z;
    o = clock();
    ht = init(ht);
    l = clock();
    ht = load(ht,"../dump exemplo/ubuntu/");
    a = clock();
    STR_pair stpair= info_from_post(ht,801049);
    b = clock();
    LONG_list l1 = top_most_active(ht,10);
    c = clock();
    Date begin = nDate(1,1,2014);
	Date end = nDate(31,12,2014);
	LONG_pair pair = total_posts(ht,begin,end);
    d = clock();
    Date beginz = nDate(1,1,2014);
    Date endz = nDate(31,1,2014);
    LONG_list l2 = questions_with_tag(ht,"nautilus",beginz,endz);
    e = clock();
    USER u = get_user_info(ht,15811);
    f = clock();
    Date begin2 = nDate(1,11,2015);
	Date end2 = nDate(30,11,2015);
    LONG_list l3 = most_voted_answers(ht,5,begin2,end2);
    g = clock();
    Date begin1 = nDate(1,8,2014);
	Date end1 = nDate(11,8,2014);
    LONG_list l4 = most_answered_questions(ht,10,begin1,end1);
    h = clock();
    LONG_list l5 = contains_word(ht,"kde",10);
    m = clock();
    LONG_list l6 = both_participated(ht,253,455,5);
    j = clock();
    long best = better_answer(ht,5942);
    k = clock();
    LONG_list l7 = most_used_best_rep(ht,10,begin,end);
    y = clock();
    ht = clean(ht);
    z= clock();
    printf("Query%30sTimes      Result\n"," ");
    printf("info_from_post: %30f\n",(float)(b-a)/CLOCKS_PER_SEC);
    printf("top_most_active: %27f\n",(float)(c-b)/CLOCKS_PER_SEC);
    printf("total_posts: %29f\n",(float)(d-c)/CLOCKS_PER_SEC);
    printf("questions_with_tag: nautilus %29f\n",(float)(e-d)/CLOCKS_PER_SEC);
    printf("get_user_info: id 15811 %25f\n",(float)(f-e)/CLOCKS_PER_SEC);
    printf("most_voted_answers: %26f\n",(float)(g-f)/CLOCKS_PER_SEC);
    printf("most_answered_questions: %23f\n",(float)(h-g)/CLOCKS_PER_SEC);
    printf("contains_word: kde  %19f\n",(float)(m-h)/CLOCKS_PER_SEC);
    printf("better_answer: id 5942 %15f\n",(float)(k-j)/CLOCKS_PER_SEC);
    printf("both_participated: id1: 253 id2: 455 %15f\n",(float)(j-m)/CLOCKS_PER_SEC);
    printf("most_used_best_rep: %12f\n",(float)(k-j)/CLOCKS_PER_SEC);
    printf("Tempo de Parser: %28f \n",(float)(a-l)/CLOCKS_PER_SEC);
    printf("Clean: %20f \n",(float)(z-y)/CLOCKS_PER_SEC);
    printf("Init: %20f \n",(float)(l-o)/CLOCKS_PER_SEC);
   	printf("Q U E R Y 1\n");
   	print_pair(stpair);
   	printf("Q U E R Y 2\n");
    print_LONG_list(l1);
    printf("Q U E R Y 3\n");
    print_long_pair(pair);
    printf("Q U E R Y 4\n");
    print_LONG_list(l2);
    printf("Q U E R Y 5\n");
    print_USER(u);
    printf("Q U E R Y 6\n");
    print_LONG_list(l3);
    printf("Q U E R Y 7\n");
    print_LONG_list(l4);
    printf("Q U E R Y 8\n");
    print_LONG_list(l5);
    printf("Q U E R Y 9\n");
    print_LONG_list(l6);
    printf("Q U E R Y 10\n");
    printf("%li\n",best);
    printf("Q U E R Y 11\n");
    print_LONG_list(l7);
    free_str_pair(stpair);
    free_list(l1);
    free_long_pair(pair);
    free_list(l2);
    free_user(u);
    free_list(l3);
    free_list(l4);
    free_list(l5);
    free_list(l6);
    free_list(l7);
	return 0;
}